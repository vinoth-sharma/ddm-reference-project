<div id="formula-wrapper" [hidden]="copyPaste">
  <p>Formula</p>
  <div id="formula">
    <p *ngIf="formula && formula.select && selectColumns.length">SELECT {{selectColumns | spaceFormater}}</p>
    <p *ngIf="formula && formula.from">FROM {{formula.from | spaceFormater }}</p>
    <div *ngIf="formula && formula.joins && formula.joins.length">
      <p *ngFor="let join of formula['joins']">{{join | spaceFormater}}</p>
    </div>
    <p *ngIf="formula && formula.where">WHERE {{formula.where | spaceFormater}}</p>
    <p *ngIf="formula && formula.groupBy">GROUP BY {{formula.groupBy | spaceFormater}}</p>
    <p *ngIf="formula && formula.having">HAVING {{formula.having | spaceFormater}}</p>
    <p *ngIf="formula && formula.orderBy">ORDER BY {{formula.orderBy | spaceFormater}}</p>
  </div>

  <button *ngIf="!reportType"  type="button" class="btn btn-sm btn-success ml-2 save-query" 
        data-toggle="modal" data-target="#saveAsReportModal" data-backdrop="static" data-keyboard="false"
    [disabled]="!(enablePreview  && validSelectQuery)">Save Query</button>

  <button *ngIf="reportType" type="button" class="btn btn-sm btn-success ml-2 save-query" (click)="openSaveReportDialog()"
  [disabled]="!(enablePreview  && validSelectQuery)">Save Query</button>
  <button type="button" class="btn btn-sm btn-warning ml-2 navigate-back " [disabled]="!(enablePreview && validSelectQuery)" (click)="goToView()">Preview</button>
</div>

<div [hidden]="!copyPaste" style="margin-top:3%;">
  <textarea [(ngModel)]="formulaTextarea" class="formula-text">
    
  </textarea>
  <button type="button" class="btn btn-sm btn-success ml-2 save-query " data-toggle="modal" data-target="#saveAsReportModal" data-backdrop="static" data-keyboard="false"
  [disabled]="!formulaTextarea">Save Query</button>
  <button type="button" class="btn btn-sm btn-warning ml-2 navigate-back " [disabled]="!formulaTextarea" (click)="goToView()">Preview</button>
</div>
<app-generate-report-modal [fromPath]="'create-report'" (saveData)="saveReport($event)"></app-generate-report-modal>