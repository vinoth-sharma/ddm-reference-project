<!-- <div *ngIf="isLoading" class="spinner">
    <img style="height:100px" src= "assets/spinner.gif">
</div> -->
<div *ngIf="isLoading" style="background:rgba(0, 0,0,0.25);padding: 0px;height: 100%">
  <mat-progress-spinner style="left:40%;top:40%;" mode="indeterminate"></mat-progress-spinner>
</div>
<div class="table-position">
  <button class="col-xs-1 fa fa-arrow-left ml-3 mt-3 btn-modification" (click)="routeBack()"></button>
  <h4 class="m-0 header-modofication">Scheduled reports</h4>
  <table mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="index_number">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="index-width" sticky><b>Sl.No</b></th>
      <td mat-cell *matCellDef="let result" class="pointer" class="index-width">
        {{result.index_number}}</td>
    </ng-container>

    <ng-container matColumnDef="report_name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="report-name-width" sticky><b>Report Name</b></th>
      <td mat-cell *matCellDef="let result" class="report-name-width">
        <!-- class="pointer" (click)="goToScheduledReport(result.index_number)"-->
        {{result.report_name}}</td>
    </ng-container>

    <ng-container matColumnDef="schedule_details">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="schedule-custom-width">
        <b>Schedule</b></th>
      <td mat-cell *matCellDef="let result" class="schedule-custom-width">{{result.schedule_details}}</td>
    </ng-container>

    <ng-container matColumnDef="created_by_user">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="scheduler-width"><b>Scheduler</b></th>
      <td mat-cell *matCellDef="let result" class="scheduler-width">{{result.created_by_user}}</td>
    </ng-container>

    <ng-container matColumnDef="updated_at">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="last-modified-width"><b>Last Modified on</b>
      </th>
      <td mat-cell *matCellDef="let result" class="last-modified-width">{{result.updated_at}}</td>
    </ng-container>

    <ng-container matColumnDef="export_format">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="delivery-format-width"><b>Delivery
          format</b></th>
      <td mat-cell *matCellDef="let result" class="delivery-format-width">{{result.export_format}}</td>
    </ng-container>

    <ng-container matColumnDef="sharing_mode">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="delivery-method-width"><b>Delivery
          method</b>
      </th>
      <td mat-cell *matCellDef="let result" class="delivery-method-width">{{result.sharing_mode}}</td>
    </ng-container>

    <ng-container matColumnDef="multiple_addresses">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="method-details-width"><b>Email Addresses</b>
      </th>
      <td mat-cell *matCellDef="let result" class="method-details-width">{{result.multiple_addresses}}</td>
    </ng-container>

    <ng-container matColumnDef="more_option">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sticky class="more-options-width"><b>More Options</b>
      </th>
      <td mat-cell *matCellDef="let result" class="method-details-width">
        <div class="alignCenter" style="padding: 1vh 1vw">
          <button class="hideBtn" title="Re-Schedule Report" (click)="goToScheduledReport(result.index_number)">
            <svg class="oes-s2styles" viewBox="0 0 24 24">
              <path fill="#000000"
                d="M15,13H16.5V15.82L18.94,17.23L18.19,18.53L15,16.69V13M19,8H5V19H9.67C9.24,18.09 9,17.07 9,16A7,7 0 0,1 16,9C17.07,9 18.09,9.24 19,9.67V8M5,21C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V11.1C22.24,12.36 23,14.09 23,16A7,7 0 0,1 16,23C14.09,23 12.36,22.24 11.1,21H5M16,11.15A4.85,4.85 0 0,0 11.15,16C11.15,18.68 13.32,20.85 16,20.85A4.85,4.85 0 0,0 20.85,16C20.85,13.32 18.68,11.15 16,11.15Z" />
            </svg>
          </button>
          <button class="hideBtn" title="Delete Scheduled Report"
            (click)="deleteScheduledReport(result.report_schedule_id)">
            <svg class="oes-s2styles" viewBox="0 0 24 24">
              <path fill="#000" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
            </svg>
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true" color="grey"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <div class="empty-msg-div" *ngIf="isEmptyTables">No Data available</div>
  <mat-paginator [pageSizeOptions]="[10,15,20]" showFirstLastButtons></mat-paginator>
</div>

<app-schedule *ngIf="firstClick" [scheduleReportData]="scheduleDataToBeSent" (update)="tableSorting()"></app-schedule>
