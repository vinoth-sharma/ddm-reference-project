<div class="modal fade" id="shareReportsModal" tabindex="-1" role="dialog" aria-labelledby="shareReportsModal"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header p-3">
        <h3 class="modal-title">Share Reports</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" (click)="initialState()">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <!-- report name -->
        <div class="mb-4">
          <label class="col-form-label w-35">Report Name</label>
          <input type="text" class="form-control h-29" style="color: black;" placeholder="Report name" readonly="all"
            [(ngModel)]="selectedName" />
        </div>

        <!-- selct format -->
        <div class="mb-4">
          <label class="col-form-label w-35">Format</label>
          <select class="form-control h-29" [(ngModel)]="shareData['format']">
            <option *ngFor="let format of formats" [value]="format">
              {{format}}
            </option>
          </select>
        </div>

        <!-- selct delivery method -->
        <div class="mb-4">
          <label class="col-form-label w-35">Delivery Method</label>
          <select class="form-control h-29" [(ngModel)]="shareData['delivery']">
            <option *ngFor="let method of deliveryMethods" [value]="method">
              {{method}}
            </option>
          </select>
        </div>

        <div *ngIf="shareData['delivery'] == 'Email'">

          <!-- choose user -->
          <div class="mb-4">
            <label class="col-form-label w-35">Choose Users</label>
            <mat-form-field class="example-chip-list" appearance="outline">
              <mat-chip-list #chipList>
                <mat-chip *ngFor="let email of emails" [selectable]="selectable" [removable]="removable"
                  (removed)="remove(email)">
                  {{email.name}}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                  [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
              </mat-chip-list>
            </mat-form-field>


            <!-- add description -->
            <div class="mb-4">
              <label class="col-form-label w-35">Add Description:</label>
              <!-- <input type="text" class="form-control mb-4 h-29" [(ngModel)]="shareData['dMethod']['email']['eDesc']"/> -->
              <textarea class="form-control mb-4" row="1" [(ngModel)]="shareData['dMethod']['email']['eDesc']"
                (keydown)="autoSize($event.target)"></textarea>
              <div style="display:inline-block;">
                <input type="file" class="sideButtons" style="display: none;" accept="image/*" id="valueInput"
                  #selectImage (click)="uploadImage($event)">
                <button (click)="triggerFileBtn()"
                  style="margin-top:3px;border: none;background-color:transparent;outline: none;" title="Upload image">
                  <svg style="width:20px;height:20px;" viewBox="0 0 24 24">
                    <path fill="#000000" d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z" />
                  </svg>
                </button>
                <img [src]="imgPreview" height="129" alt="Preview" *ngIf="imgUrl">
              </div>
            </div>

            <div class="mb-4">
              <label class="col-form-label w-35">Add Signature:</label>
              <textarea id="froala-editor"></textarea>
              <!-- <select class="form-control h-29" [(ngModel)]="shareData['dMethod']['email']['eSignature']"> -->
              <!-- <option *ngFor="let method of deliveryMethods" [value]="method">
                {{method}}
              </option> -->
              <!-- </select> -->
              <button (click)="isSignature = true"
                style="margin-top:3px;border: none;background-color:transparent;outline: none;"
                title="Edit/Add Signature">
                <svg style="width:20px;height:20px;" viewBox="0 0 24 24">
                  <path fill="#000000"
                    d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
                </svg>
              </button>
            </div>
          </div>

          <!-- if delivery method = ftp -->
          <div *ngIf="shareData['delivery'] == 'FTP'">
            <!-- ftp address -->
            <div class="mb-4">
              <label class="col-form-label w-35">FTP Address:</label>
              <select class="form-control h-29" [(ngModel)]="shareData['dMethod']['ftp']['ftpAdrs']">
                <option value="" selected="selected" disabled>Select FTP Address</option>
                <option *ngFor="let method of deliveryMethods" [value]="method">
                  {{method}}
                </option>
              </select>
            </div>

            <!-- ftp port -->
            <div class="mb-4">
              <label class="col-form-label w-35">FTP Port:</label>
              <select class="form-control h-29" [(ngModel)]="shareData['dMethod']['ftp']['ftpPort']">
                <option value="" selected="selected" disabled>Select FTP Port</option>
                <option *ngFor="let method of deliveryMethods" [value]="method">
                  {{method}}
                </option>
              </select>
            </div>

            <!-- add description -->
            <div class="mb-4">
              <label class="col-form-label w-35">Add Description</label>
              <!-- <input type="text" class="form-control mb-4 h-29" [(ngModel)]="shareData['dMethod']['ftp']['ftpDesc']"/> -->
              <textarea class="form-control mb-4" row="1" [(ngModel)]="shareData['dMethod']['ftp']['ftpDesc']"
                (keydown)="autoSize($event.target)"></textarea>
            </div>
          </div>


          <div *ngIf="isSignature" id="signature-body">
            <div class="card">
              <div class="card-header">{{"Add Signature"}}
                <button type="button" class="close" (click)="isSignature=false" aria-label="Close">
                  <span aria-hidden="true" (click)="isSignature = false">&times;</span>
                </button>
              </div>
              <div class="card-body">
                <!-- <textarea class="form-control mb-4 signature-area" id= "froala" ></textarea>
               -->
                <div id="froala-editor">
                </div>
              </div>
              <div class="card-footer">
                <button type="button" class="btn btn-secondary" style="margin-left: 99px;"
                  (click)="isSignature = false">Cancel</button>
                <button type="button" class="btn btn-primary" style="margin-left: 8px;">OK</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer mt-0">
          <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="initialState()">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="shareReport()">Share</button>
        </div>

      </div>
    </div>
  </div>