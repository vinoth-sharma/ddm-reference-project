<div class="modal-container">
  <div class="modal-header">
    Charts
    <mat-icon style="cursor:pointer;" (click)="closeDailog();">close</mat-icon>
  </div>
  <div class="modal-body" style="padding: 5px 20px;"  *ngIf="!previewChartEnable">
    <div class="chart-type-wrapper">
      <div style="font-size: 16px;padding: 10px;">Please select the type of Chart :</div>
      <mat-button-toggle-group name="fontStyle" aria-label="Font Style" (change)="btnToggled($event)" id="sheet-menu">
        <mat-button-toggle *ngFor="let chart of chartTypes" [value]="chart.value" [checked]="chart.isSelected">
          <mat-icon>{{ chart.icon_name }}</mat-icon>
          {{ chart.name }}
        </mat-button-toggle>

      </mat-button-toggle-group>
    </div>

    <div class="opt-container">
      <div class="opt-title">Please select the column for X- axis :</div>
      <!-- <div class="opt-title" *ngIf="checkPie()">Please select the column for pie chart:</div> -->
      <mat-form-field>

        <input type="text" placeholder="x-axis" matInput [formControl]="myControl" [matAutocomplete]="auto"
        [ngModel]="selectedParams.data.xAxis | spaceFormater">
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="xAxisSelected($event)" >
          <mat-option *ngFor="let xAxis of filteredColumnNames | async" [value]="xAxis.columnName"
                      [title]="xAxis.columnName | spaceFormater">
              {{ xAxis.columnName | spaceFormater }} {{ xAxis.dataType? '&nbsp;' + '|' + '&nbsp;' + xAxis.dataType:'' }}
            </mat-option>
        </mat-autocomplete>

        <!-- <mat-label>X axis</mat-label>
        <mat-select (selectionChange)="xAxisSelected($event)" [(ngModel)]="selectedParams.data.xAxis">
          <mat-option *ngFor="let xAxis of columnDetails" [value]="xAxis.columnName">
            {{ xAxis.columnName }} {{ xAxis.dataType? '&nbsp;' + '|' + '&nbsp;' + xAxis.dataType:'' }}
          </mat-option>
        </mat-select> -->
      </mat-form-field>
    </div>
    <div class="opt-container">
      <div class="opt-title">Please select the column for Y-axis :</div>
      <mat-form-field>


          <input type="text" placeholder="y-axis" matInput [formControl]="myControl1" [matAutocomplete]="auto1"
          [ngModel]="selectedParams.data.yAxis | spaceFormater">
          <mat-autocomplete #auto1="matAutocomplete" (optionSelected)="yAxisSelected($event)" >
            <mat-option *ngFor="let yAxis of filteredColumnNames1 | async" [value]="yAxis.columnName"
                          [title]="yAxis.columnName | spaceFormater">
                {{ yAxis.columnName | spaceFormater }} {{ yAxis.dataType? '&nbsp;' + '|' + '&nbsp;' + yAxis.dataType:'' }}
              </mat-option>
          </mat-autocomplete>

        <!-- <mat-label>Y axis</mat-label>
        <mat-select (selectionChange)="yAxisSelected($event)" [(ngModel)]="selectedParams.data.yAxis">
          <mat-option *ngFor="let xAxis of columnDetails" [value]="xAxis.columnName">
            {{ xAxis.columnName }} {{ xAxis.dataType? '&nbsp;' + '|' + '&nbsp;' + xAxis.dataType:'' }}
          </mat-option>
        </mat-select> -->
      </mat-form-field>
    </div>

    <div class="opt-container" style="justify-content: center;" *ngIf="enableEditNames">
      <mat-form-field appearance="outline" style="width: 400px;">
        <mat-label>Chart Title</mat-label>
        <input matInput type="text" [(ngModel)]="selectedParams.tab_title" maxlength="50">
        <mat-hint style="color:green"> Chart title displayed above the charts</mat-hint>
      </mat-form-field>
    </div>
    <div class="opt-container" style="justify-content: center;"  *ngIf="enableEditNames">
      <mat-form-field appearance="outline" style="width: 400px;">
        <mat-label>New sheet name</mat-label>
        <input matInput type="text" [(ngModel)]="selectedParams.tab_name" inputNameValidator maxlength="20">
        <mat-hint *ngIf="sheetNameExists" style="color:red">Sheet name already exists!</mat-hint>
      </mat-form-field>
    </div>
  </div>
  <div class="modal-body" *ngIf="previewChartEnable">
    <mat-icon style="font-weight:800;cursor: pointer;" (click)="previewChartEnable = false">arrow_back_ios</mat-icon>
    <app-chart-container-wrapper [tabData]="selectedParams" [sheetData]="injectedData.sheetData"
    [previewType]="'previewOnly'" (loadingFlag)="loadingStatus($event)" >
    </app-chart-container-wrapper>
    <div class="loader" *ngIf="showLoader">
      <div >Loading......</div>
    </div>
  </div>
  <div class="modal-footer">
    <button mat-raised-button
     (click)="closeDailog();" 
     style="margin-right: 10px;"
     [cssBtn]="'cancel'">Cancel</button>
    <button mat-raised-button 
    (click)="previewChart();" 
    style="margin-right: 10px;"
    [disabled]="!enableEditNames || previewChartEnable" 
    [cssBtn]="'mid'"
    [paramFlag]="!enableEditNames || previewChartEnable?true:false">
      Preview
    </button>
    <button mat-raised-button 
      *ngIf="!previewChartEnable"
      (click)="insertTabInSheet();"
     [disabled]="!enableEditNames || previewChartEnable || isEmpty()"
    [cssBtn]="'ok'" 
    [paramFlag]="!enableEditNames || previewChartEnable || isEmpty()?true:false">
      Insert chart
    </button>
  </div>
</div>