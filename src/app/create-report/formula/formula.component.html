<div id="formula-wrapper">
  <p>Formula</p>
  <div id="formula">
    <p *ngIf="formula && formula.select && selectColumns.length">SELECT {{selectColumns}}</p>
    <p *ngIf="formula && formula.from">FROM {{formula.from}}</p>
    <div *ngIf="formula && formula.joins && formula.joins.length">
      <p *ngFor="let join of formula['joins']">{{join}}</p>
    </div>
    <p *ngIf="formula && formula.where">WHERE {{formula.where}}</p>
    <p *ngIf="formula && formula.groupBy">GROUP BY {{formula.groupBy}}</p>
    <p *ngIf="formula && formula.having">HAVING {{formula.having}}</p>
    <p *ngIf="formula && formula.orderBy">ORDER BY {{formula.orderBy}}</p>
  </div>

  <button *ngIf="!reportType"  type="button" class="btn btn-sm btn-success ml-2 save-query" 
        data-toggle="modal" data-target="#saveAsReportModal" data-backdrop="static" data-keyboard="false"
    [disabled]="!(enablePreview  && validSelectQuery)">Save Query</button>

  <button *ngIf="reportType" type="button" class="btn btn-sm btn-success ml-2 save-query" (click)="saveReport($event)"
  [disabled]="!(enablePreview  && validSelectQuery)">Save Query</button>
  <button type="button" class="btn btn-sm btn-warning ml-2 navigate-back " [disabled]="!(enablePreview && validSelectQuery)" (click)="goToView()">Preview</button>
</div>

<app-generate-report-modal [fromPath]="'create-report'" (saveData)="saveReport($event)"></app-generate-report-modal>