<div class="container-fluid">
  <div class="row query-btn">
    <div class="col-sm-4">
      <button type="button" class="btn btn-primary btn-g btn-block text-left pl-3 default">
        Query Builder
      </button>
    </div>
  </div>
  <div class="row"> 
    <p class="pl-17">Enter custom SQL query</p>
    <div class="col-md-11 editor-body"><div id="sqlEditor"></div></div>
  </div>

  <div class="row">
    <p class="pl-17">Custom SQL query Output</p>
    <div id="outputDiv" class="col-md-11">
      <table class="table" *ngIf="!errorMessage && tableData.length;else whenError">
        <thead>    
          <tr>
            <th *ngFor="let key of columnsKeys | paginate : {itemsPerPage: pageData.perPage,currentPage: pageNum, totalItems: pageData.totalCount}">
              {{ key}}
            </th>
          </tr>
        </thead>
        <tbody *ngIf="pageData.totalCount >= 1">
          <tr *ngFor="let column of tableData">
            <td *ngFor="let key of columnsKeys;">
              {{column[key]?column[key]:'-'}} 
            </td>
          </tr>
        </tbody>
      </table>

      <ng-template #whenError>
        <div>
          <p>{{errorMessage}}</p>
        </div>
      </ng-template>
    </div>  
  </div>

  <pagination-controls *ngIf="pageData.totalCount > pageData.perPage" (pageChange)="pageChange($event)" class="my-pagination"></pagination-controls>
  
  <div class="row justify-content-around">
    <button type="reset" class="btn btn-primary col-2" (click)="reset()"> Clear </button>
    <button class="btn btn-primary col-2" [disabled]="isDisabled()" (click)="openModal()"> Save </button>
    <button class="btn btn-primary col-2" [disabled]="isDisabled()" (click)="executeSql()"> Execute </button>
    <button [hidden]="true" id="open-modal-btn" data-toggle="modal" data-target="#nameModal">Button</button>â€¨
  </div>

</div>

<app-saveAs-modal (saveData)="isEditable ? editQueryName($event):saveSql($event)" [title]="'Custom table name'" [inputLabel]="'Save as'" [inputValue]="saveAsName"></app-saveAs-modal>
