<mat-sidenav-container *ngIf="columns" class="h-100 w-100">
  <mat-sidenav mode="side" #sidenav position="end" class="w-25">
    <app-pivot-builder [view]="'sidenav'" [(pivotData)]="pivotData" (update)="updatePivotData($event)"></app-pivot-builder>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="pivot-edit">
      <mat-form-field class="float-left">
        <mat-select multiple placeholder="{{pivotData.filters}}" [(ngModel)]="selectedFilters" (selectionChange)="updateTableData()">
          <mat-option *ngFor="let filter of filters" [value]="filter">
            {{filter}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button (click)="sidenav.toggle()" type="button" class="btn btn-primary float-right">
        {{sidenav.opened ? 'Close': 'Open'}} Pivot Editor
      </button>
    </div>

    <div class="table-wrapper">
      <table class="table table-bordered table-hover">
        <thead class="thead-light">
          <tr>
            <th *ngFor="let col of columns">{{col}}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of pivotData.data;let rowNum = index" [hidden]="row['__isHidden__']" (click)="toggleRows(rowNum)">
            <td style.paddingLeft="{{10 * ((row.hasOwnProperty(expandableSymbol) ? row[expandableSymbol]: maxLevel + 4) + 1)}}px">
              <span *ngIf="row.hasOwnProperty(expandableSymbol)">
                <button type="button" class="btn">
                  <i class="material-icons" *ngIf="row['__expanded__']">expand_less</i>
                  <i class="material-icons" *ngIf="!row['__expanded__']">expand_more</i>
                </button>
              </span>
              {{row[columns[0]]}}
            </td>
            <td *ngFor="let col of columns.slice(1)">{{row[col]}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>