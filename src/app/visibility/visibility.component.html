<div class="modal fade" id="visibility" tabindex="-1" role="dialog" aria-labelledby="visibility" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Visibility to User </h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div *ngIf="isLoad" style="padding: 0px;width: 100%;height: 80%;">
          <mat-progress-spinner style="left:40%;top:25%;" mode="indeterminate"></mat-progress-spinner>
        </div>

      <!-- FOR NORMAL TABLES  -->
        <div *ngIf="!isLoad && (typeFlag == 'tables')">
          <input type="text" placeholder="Search table" class="form-control search"
            (input)="filterList($event.target.value)" />
          <div *ngIf="items.length;else notables" class="select-all form-check form-check-inline">
            <input class="form-check-input" type="checkbox" (change)="selectAll($event);isAllChecked()"
              [checked]="selectValue">
            <label class="form-check-label"><strong>Select All</strong></label>
          </div>

          <ul class="scroll-area">
            <li *ngFor="let item of items;index as i" class="list-group-item  form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="{{item.mapped_table_name}}"
                value="{{item.view_to_admins}}" [checked]="item.view_to_admins" (change)="onSelect(item)">
              <label class="form-check-label table-name"
                for="{{item.mapped_table_name}}">{{item.mapped_table_name | spaceFormater}}</label>
              <button *ngIf="!item.isShow" (click)="showColumns(i, item);" class="icon">
                <svg style="width:14px;height:14px" viewBox="0 0 24 24">
                  <path fill="#000000" d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" />
                </svg>
              </button>
              <button *ngIf="item.isShow" (click)="showColumns(i, item);" class="icon">
                <svg style="width:14px;height:14px" viewBox="0 0 24 24">
                  <path fill="#000000" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
                </svg>
              </button>
              <ng-container *ngIf="button == i && isShow">
            <li *ngFor="let column of item.column_properties | orderBy: 'column' ;index as j" class="list-group-item form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="{{column.column}}"
                value="{{column.column_view_to_admins}}" [checked]="column.column_view_to_admins" (change)="onSelectColumn(item, j)">
              <label class="form-check-label table-name" for="{{column.column}}">{{column.column | spaceFormater}}</label>
            </li>
            </ng-container>
            </li>
          </ul>
        </div>


        <!-- FOR CUSTOM TABLES -->
        <div *ngIf="!isLoad && (typeFlag == 'custom tables')">
          <input type="text" placeholder="Search table" class="form-control search"
            (input)="filterList($event.target.value)" />
          <div *ngIf="items.length;else notables" class="select-all form-check form-check-inline">
            <input class="form-check-input" type="checkbox" (change)="selectAll($event);isAllChecked()"
              [checked]="selectValue">
            <label class="form-check-label"><strong>Select All</strong></label>
          </div>

          <ul class="scroll-area">
            <li *ngFor="let item of items;index as i" class="list-group-item  form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="{{item.custom_table_name}}"
                value="{{item.view_to_admins}}" [checked]="item.view_to_admins" (change)="onSelect(item)">
              <label class="form-check-label table-name"
                for="{{item.custom_table_name}}">{{item.custom_table_name}}</label>
              <button *ngIf="!item.isShow" (click)="showColumns(i, item);" class="icon">
                <svg style="width:14px;height:14px" viewBox="0 0 24 24">
                  <path fill="#000000" d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" />
                </svg>
              </button>
              <button *ngIf="item.isShow" (click)="showColumns(i, item);" class="icon">
                <svg style="width:14px;height:14px" viewBox="0 0 24 24">
                  <path fill="#000000" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
                </svg>
              </button>
              <ng-container *ngIf="button == i && isShow">
            <li *ngFor="let column of item.column_properties | orderBy: 'column' ;index as j" class="list-group-item form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="{{column.column}}"
                value="{{column.column_view_to_admins}}" [checked]="column.column_view_to_admins" (change)="onSelectColumn(item, j)">
              <label class="form-check-label table-name" for="{{column.column}}">{{column.column}}</label>
            </li>
            </ng-container>
            </li>
          </ul>
        </div>


        <ng-template #notables>
          <div class="notables">No tables to show</div>
        </ng-template>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" [disabled]="!isEnabled" (click)="resetAll()">Reset</button>
          <button type="button" class="btn btn-success" [disabled]="!isEnabled" (click)="onApply()">Apply</button>
        </div>
      </div>
    </div>
  </div>