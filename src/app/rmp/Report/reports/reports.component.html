<div class="flex-container row tool-body">
  <!-- <div class="left-tabs"></div> -->
  <div *ngIf="reports" class="main-tool-body" style="height:100%">
    <div class="wrapper" style="height:100%">
      <br>
      <div class="row" style="width:100%">
        <div class="col">
          <h3>REPORTS</h3>
        </div>
        <div class="col">
          <input [(ngModel)]="searchText" placeholder="Insert Keywords/Request Number here " class="form-control">
        </div>
        <div class="col">
          <div class="icons">
            <div class="press">
              <a (click)="xlsxJson()"><i id="ic" class="material-icons">get_app</i></a>
              <!-- <a href="#"><i id="ic" class="material-icons">help_outline</i></a> -->
              <button data-toggle="modal" data-target="#helpModal" style="padding-right:0px;">
                  <a data-toggle = "tooltip" title = "HELP"><i id="ic" class="material-icons">help_outline</i></a>
              </button>
            </div>
          </div>
        </div>
        <table class="table table-striped table-hover">
          <thead class="thead">
            <tr>
              <th (click)="sort('favorites')">Favourites
                <span *ngIf="!reports['favorites']">&#8593;</span>
                <span *ngIf="reports['favorites']">&#8595;</span>
              </th>
              <th (click)="sort('ddm_rmp_post_report_id')">Request
                No.
                <span *ngIf="!reports['ddm_rmp_post_report_id']">&#8593;</span>
                <span *ngIf="reports['ddm_rmp_post_report_id']">&#8595;</span>
              </th>
              <th (click)="sort('ddm_rmp_status_date')">Date
                <span *ngIf="!reports['ddm_rmp_status_date']">&#8593;</span>
                <span *ngIf="reports['ddm_rmp_status_date']">&#8595;</span>
              </th>
              <th (click)="sort('title')">Title
                <span *ngIf="!reports['title']">&#8593;</span>
                <span *ngIf="reports['title']">&#8595;</span>
              </th>
              <th>DDM Name</th>
              <th >Frequency</th>
              <th *ngFor="let weekDay of weekDays" (click)="sort(weekDay + 'Frequency')">{{weekDay}}
                <span *ngIf="!reports[weekDay + 'Frequency']">&#8593;</span>
                <span *ngIf="reports[weekDay + 'Frequency']">&#8595;</span>
              </th>
              <th>Other</th>
          </thead>
          <tbody>
            <!-- | filterTable: {'Request No.': searchText, 'Date':searchText, 'DDM Name' :searchText} | orderBy: order : reverse : 'caseInsensitive' | paginate: { itemsPerPage: 10, currentPage: p } -->
            <tr
              *ngFor="let element of reports | filterTable: {'Request No.': searchText, 'Date':searchText, 'DDM Name' :searchText} | orderBy: param:orderType | paginate: { itemsPerPage: 15, currentPage: p }; let i = index">
              <td class="fav" scope="col">
                <label for="{{element.ddm_rmp_post_report_id}}" class="custom-checkbox">
                  <input type="checkbox" [(ngModel)]="element.favorites" id="{{element.ddm_rmp_post_report_id}}"
                    (click)="checked(element.ddm_rmp_post_report_id,$event)" />
                  <i class="material-icons empty">star_border</i>
                  <i class="material-icons star">star</i>

                </label>
                <!-- <div class="pretty p-icon p-toggle p-plain">
                    <input type="checkbox" />
                    <div class="state p-off">
                        <i class="icon material-icons">star_border</i>
                    </div>
                    <div class="state p-on p-info-o">
                        <i class="icon material-icons">star</i>
                    </div>
                </div> -->
              </td>
              <td colspan="1">
                {{element.ddm_rmp_post_report_id}}
              </td>
              <td colspan="1">
                {{element.ddm_rmp_status_date | date : 'dd-MMM-yyyy'}}
              </td>
              <td colspan="1">
                {{element.title}}
              </td>
              <td colspan="1">

              </td>
              <td colspan="1">
                <span *ngIf="element.frequency_data.length >= 1">Recurring</span>
                <span *ngIf="element.frequency_data == '' ">One-time</span>
              </td>
              <!-- <td scope="col" *ngIf="element.frequency_data">
                <span *ngIf="element.frequency_data.indexOf('Monday') > -1">Y<br></span>
              </td>
              <td scope="col" *ngIf="element.frequency_data">
                  <span *ngIf="element.frequency_data.indexOf('Tuesday') > -1">Y<br></span>
              </td>
              <td scope="col" *ngIf="element.frequency_data">
                  <span *ngIf="element.frequency_data.indexOf('Wednesday') > -1">Y<br></span>
              </td>
              <td scope="col" *ngIf="element.frequency_data">
                  <span *ngIf="element.frequency_data.indexOf('Thursday') > -1">Y<br></span>
              </td>
              <td scope="col" *ngIf="element.frequency_data">
                  <span *ngIf="element.frequency_data.indexOf('Friday') > -1">Y<br></span>
              </td> -->
              <td colspan="1" *ngFor="let weekDay of weekDays">{{element[weekDay + 'Frequency']}}</td>
              <td colspan="1" *ngIf="element.frequency_data || element.description">
                <span *ngFor="let subelement of element.frequency_data_filtered">{{subelement}} <br></span>
                 {{element.description}}
              </td>
            </tr>
          </tbody>
        </table>
        <div>
          <pagination-controls (pageChange)="p = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
  <div class="main-tool-body" *ngIf="!reports">
    <mat-progress-spinner style="left:40%;top:40%;" mode="indeterminate"></mat-progress-spinner>
  </div>
<!-- 
  <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="large" color="#fff" type="ball-scale-multiple">
    <p style="font-size: 20px; color: white">Loading...</p>
  </ngx-spinner> -->

  <div id="configReport" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Configurable DDM Report</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body modal-comment-body">
          <div class="row config">
            <div class="col-sm-5">
              Request No.
            </div>
            <div class="col-sm-7">
              2018-2016
            </div>
          </div>

          <div class="row config">
            <div class="col-sm-5">
              Title:
            </div>
            <div class="col-sm-7">
              Order-to-Sale
            </div>
          </div>

          <div class="row config">
            <div class="col-sm-5">
              DDM Name:
            </div>
            <div class="col-sm-7">
              NC Allocation Group-Units in Stock
            </div>
          </div>

          <div class="row config">
            <div class="col-sm-5">
              Division(s):
            </div>
            <div class="col-sm-7">

              <ng-multiselect-dropdown class="drop-" [placeholder]="'Search for model'" [data]="dropdownList"
                [(ngModel)]="selectedItems" [settings]="dropdownSettings" (onSelect)="onItemSelect($event)"
                (onSelectAll)="onSelectAll($event)">
              </ng-multiselect-dropdown>

            </div>
          </div>

          <div class="row config-drop">
            <div class="col-sm-5">
              Allocation Groups(s):
            </div>
            <div class="col-sm-7">

              <ng-multiselect-dropdown class="drop-" [placeholder]="'Search for model'" [data]="dropdownList"
                [(ngModel)]="selectedItems" [settings]="dropdownSettings" (onSelect)="onItemSelect($event)"
                (onSelectAll)="onSelectAll($event)">
              </ng-multiselect-dropdown>

            </div>
          </div>

        </div>
        <div class="modal-footer">
          <div class="col-sm-6">
            <button type="button" class="btn btn-primary  footer-buttons">Create Report</button>
          </div>
          <div class="col-sm-6">
            <button type="button" class="btn btn-success">Save Settings</button>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- <ngx-spinner [bdColor]="spinnerConfig.bdColor" [size]="spinnerConfig.size" [color]="spinnerConfig.color" [type]="spinnerConfig.type"></ngx-spinner> -->

  <div class="modal fade " id="helpModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
 aria-hidden="true">
 <div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
     <div class="modal-header">
       <img class="logo" src="/assets/OFT_Logo.jpg">
       <h5 class="modal-title" id="mainMenuDescriptionHelp">Help</h5>
       <button type="button" class="close" data-dismiss="modal" aria-label="Close">
         <span aria-hidden="true">&times;</span>
       </button>
     </div>
     <div class="modal-body">
       <div class="row">
         <div class="col-9">
           <button class="btn btn-success save-text-ddm" (click)="content_edits()" *ngIf="editModes" style="margin-right:3%">Save</button>
           <button class="btn btn-danger save-text-ddm" (click)="edit_True()" *ngIf="editModes">Cancel</button>
         </div>
         <div class="col-3" style="padding-left:12%;">
           <button *ngIf="user_role == 'Admin'" id="edit_button" class="editButton" (click)="edit_True()">
               <a data-toggle = "tooltip" title = "EDIT"><i id="ic" class="material-icons">mode_edit</i></a>
           </button>
         </div>
       </div>
       <!-- <div class="row ckEditor">
         <ckeditor [editor]="Editor" [(ngModel)]="namings" [disabled]="!editModes" (blur)="onChange($event)" style="width:100%; padding:1%;"></ckeditor>
       </div> -->
       <div  id="ckEditorHelp"></div>
     </div>
     <div class="modal-footer">
       <button type="button" id="modal_close_button" class="btn btn-secondary" data-dismiss="modal">Close</button>
     </div>
   </div>
 </div>
</div>
